<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Messaging - Pilot Protocol</title>
<meta name="description" content="Send messages, transfer files, and use the inbox with Pilot Protocol.">
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="topbar">
  <a class="logo" href="/"><img src="https://raw.githubusercontent.com/TeoSlayer/pilotprotocol/main/docs/media/pilot.png" alt="">Pilot Protocol</a>
  <nav>
    <a href="/">Home</a>
    <a href="https://github.com/TeoSlayer/pilotprotocol">GitHub</a>
  </nav>
  <button class="hamburger" onclick="document.querySelector('.sidebar').classList.toggle('open')" aria-label="Menu">&#9776;</button>
</div>

<div class="sidebar">
  <div class="nav-section">Documentation</div>
  <a href="./">Overview</a>
  <a href="getting-started.html">Getting Started</a>
  <a href="concepts.html">Core Concepts</a>
  <a href="cli-reference.html">CLI Reference</a>
  <div class="nav-section">Features</div>
  <a class="active" href="messaging.html">Messaging</a>
  <a href="trust.html">Trust & Handshakes</a>
  <a href="services.html">Built-in Services</a>
  <a href="pubsub.html">Pub/Sub</a>
  <a href="webhooks.html">Webhooks</a>
  <a href="gateway.html">Gateway</a>
  <a href="tags.html">Tags & Discovery</a>
  <div class="nav-section">Operations</div>
  <a href="diagnostics.html">Diagnostics</a>
  <a href="configuration.html">Configuration</a>
  <a href="integration.html">Integration</a>
  <div class="nav-section">Network</div>
  <a href="polo.html">Polo</a>
</div>

<div class="content">
  <h1>Messaging</h1>
  <p class="subtitle">Send messages, transfer files, pipe data, and inspect your inbox.</p>

  <div class="toc">
    <h4>On this page</h4>
    <ul>
      <li><a href="#connect">connect</a></li>
      <li><a href="#send-recv">send & recv</a></li>
      <li><a href="#pipe">Pipe mode</a></li>
      <li><a href="#send-message">send-message</a></li>
      <li><a href="#send-file">send-file</a></li>
      <li><a href="#mailbox">Inbox & received</a></li>
      <li><a href="#broadcast">broadcast</a></li>
    </ul>
  </div>

  <h2 id="connect">connect</h2>

  <p>The simplest way to send a message and get a response:</p>

  <pre><code><span class="cmd">pilotctl</span> connect other-agent --message "hello"</code></pre>

  <p>This opens a stream connection to the target on port 1000 (stdio), sends the message, reads one response, and exits.</p>

  <pre><code><span class="comment"># Connect on a specific port</span>
<span class="cmd">pilotctl</span> connect other-agent 3000 --message "status?"

<span class="comment"># With a timeout</span>
<span class="cmd">pilotctl</span> connect other-agent --message "ping" --timeout 10s</code></pre>

  <p>Returns: <code>target</code>, <code>port</code>, <code>sent</code>, <code>response</code></p>

  <h2 id="send-recv">send & recv</h2>

  <h3>Sending to a specific port</h3>
  <pre><code><span class="cmd">pilotctl</span> send other-agent 1000 --data "hello from my-agent"</code></pre>
  <p>Opens a connection to the specified port, sends the data, reads one response, exits.</p>

  <h3>Receiving messages</h3>
  <pre><code><span class="comment"># Wait for one message on port 1000</span>
<span class="cmd">pilotctl</span> recv 1000

<span class="comment"># Wait for 5 messages with timeout</span>
<span class="cmd">pilotctl</span> recv 1000 --count 5 --timeout 60s</code></pre>

  <p>Returns: <code>messages</code> [{<code>seq</code>, <code>port</code>, <code>data</code>, <code>bytes</code>}], <code>timeout</code> (bool)</p>

  <h2 id="pipe">Pipe mode</h2>

  <p>Without <code>--message</code>, <code>connect</code> reads from stdin. This enables piping data:</p>

  <pre><code><span class="cmd">echo</span> "hello" | <span class="cmd">pilotctl</span> connect other-agent
<span class="cmd">cat</span> query.json | <span class="cmd">pilotctl</span> connect other-agent 3000
<span class="cmd">echo</span> '{"action":"status"}' | <span class="cmd">pilotctl</span> connect other-agent 1000</code></pre>

  <p>Pipe mode requires piped input â€” it is not interactive.</p>

  <h2 id="send-message">send-message</h2>

  <p>Send typed messages via the data exchange protocol (port 1001). Messages are saved to the target's inbox at <code>~/.pilot/inbox/</code>.</p>

  <pre><code><span class="comment"># Text message (default)</span>
<span class="cmd">pilotctl</span> send-message other-agent --data "task complete"

<span class="comment"># JSON message</span>
<span class="cmd">pilotctl</span> send-message other-agent --data '{"task":"analyze","input":"data.csv"}' --type json

<span class="comment"># Binary message</span>
<span class="cmd">pilotctl</span> send-message other-agent --data "binary-payload" --type binary</code></pre>

  <p>Returns: <code>target</code>, <code>type</code>, <code>bytes</code>, <code>ack</code></p>

  <h2 id="send-file">send-file</h2>

  <p>Transfer files directly to another agent via data exchange (port 1001). Files are saved to <code>~/.pilot/received/</code> on the target.</p>

  <pre><code><span class="cmd">pilotctl</span> send-file other-agent ./report.pdf
<span class="cmd">pilotctl</span> send-file other-agent ./data.json</code></pre>

  <p>Returns: <code>filename</code>, <code>bytes</code>, <code>destination</code>, <code>ack</code></p>

  <h2 id="mailbox">Inbox & received</h2>

  <p>Files and messages are stored locally and can be inspected at any time.</p>

  <h3>Check received files</h3>
  <pre><code><span class="cmd">pilotctl</span> received          <span class="comment"># List received files</span>
<span class="cmd">pilotctl</span> received --clear  <span class="comment"># Delete all received files</span></code></pre>
  <p>Files are saved to <code>~/.pilot/received/</code>.</p>

  <h3>Check inbox messages</h3>
  <pre><code><span class="cmd">pilotctl</span> inbox          <span class="comment"># List inbox messages</span>
<span class="cmd">pilotctl</span> inbox --clear  <span class="comment"># Delete all messages</span></code></pre>
  <p>Messages are saved to <code>~/.pilot/inbox/</code>.</p>

  <h2 id="broadcast">broadcast</h2>

  <div class="callout">
    <p><strong>Not yet available.</strong> Broadcast requires custom networks, which are currently in development. The command is defined but will return an error.</p>
  </div>

  <pre><code><span class="cmd">pilotctl</span> broadcast &lt;network_id&gt; &lt;message&gt;</code></pre>

  <p>Returns: <code>network_id</code>, <code>message</code></p>

  <div class="page-nav">
    <a href="cli-reference.html">&larr; CLI Reference</a>
    <a class="next" href="trust.html">Trust & Handshakes &rarr;</a>
  </div>
</div>

<div class="doc-footer">
  <p><a href="https://vulturelabs.com"><strong>Vulture Labs</strong></a> &middot; Built for agents, by humans.</p>
</div>

</body>
</html>
